<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<body>

<div class="container">
    <div>
        <ul>
            <c:forEach var="roomList" items="${roomList}" varStatus="stat">
    			<li>
    			<a>방번호 ${roomList.roomNo}</a>
    			<a>방개설자 ${roomList.userId}</a>
    			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="<c:url value='/chat/choice?="'> 
            <c:param name='roomNo' value='${roomList.roomNo}'/>
        </c:url>" onclick="choice()">${roomList.roomName}
        </a>
    			</li>
			</c:forEach>
        </ul>
    </div>
</div>
<script type="text/javascript">

function choice(){

	console.log(this);
		let roomNo = "{roomList.roomNo}";
		console.log("roomNo" , roomNo);
	
	if(confirm("채팅방에 참가하시겠습니까?")){
		
		return true;
	} else {
		return false;
	}

}

const choiceT = document.querySelector("#choice");

const tt = function choiceT(){
	
	alert("테스트");
	console.log("khaskjdahkas");
	
}

// const click = function (pThis){
	
// 	choiceT.addEventListener("click" , function(){
		
// 	console.log("선택")
// 	confirm("참가하시겠습니까?");
// 	let xhr = new XMLHttpRequest();
//     xhr.open("get" , "" , true);
//     xhr.onreadystatechange = function(){
//         if(xhr.readyState == 4 && xhr.status == 200){
//             var ck = JSON.parse(xhr.responseText);
//             console.log("체크 : " , ck);
//             // xml을 json으로 변환
//             var x2js = new X2JS();
//             var jsonObj = x2js.xml_str2json(xhr.responseText);
//             console.log(xhr.responseText);
//         }
//     xhr.send();
//     }
// 	})
// }

</script>
</body>
</html>