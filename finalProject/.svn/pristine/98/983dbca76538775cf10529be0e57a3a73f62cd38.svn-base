package kr.or.ddit.pro_service.service_request.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

import kr.or.ddit.pro_service.service_request.service.SrvcRequstService;
import kr.or.ddit.pro_service.service_request.vo.V_SrvcRequstVO;
import kr.or.ddit.vo.UsersVO;
import lombok.extern.slf4j.Slf4j;

@Controller
@RequestMapping("/srvcRequst")
@Slf4j
public class SrvcRequstController {
	
	@Autowired
	SrvcRequstService srvcRequstService;

	V_SrvcRequstVO vSrvcRequstVO = new V_SrvcRequstVO();
	
	@GetMapping("/srvcRqList")
	public String srvcRqList(Model model) {
	
		List<V_SrvcRequstVO> vSrvcRequstVOList =
				this.srvcRequstService.srvcRqList(vSrvcRequstVO);
		
		model.addAttribute("vSrvcRequstVOList", vSrvcRequstVOList);
		log.info("srvcRqList -> vSrvcRequstVOList : " + vSrvcRequstVOList);
			
		return "srvcRq/srvcRqList";
	};
	
	@GetMapping("/srvcRqDetail")
	@ResponseBody
	public V_SrvcRequstVO srvcRqDetail(@RequestParam int srvcRequstNo) {
		
		vSrvcRequstVO.setSrvcRequstNo(srvcRequstNo);
		vSrvcRequstVO = this.srvcRequstService.srvcRqDetail(vSrvcRequstVO);
		
		return vSrvcRequstVO;
	}
	
	//url:"/srvcRequst/processFn?srvcRequstNo="+srvcRequstNo
	@PostMapping("/processFn")
	@ResponseBody
	public int processFn(@RequestParam int srvcRequstNo) {
		int res= 0;
		
		res = this.srvcRequstService.processFn(srvcRequstNo);
		
		return res;
	}
	
}
