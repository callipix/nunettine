<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.board.pro_collabo.mapper.ProCprtnBbscttMapper">
	
	<sql id = "where">
		<if test="keyword!=null and keyword!=''">
			And ( 
				PRO_CPRTN_BBSCTT_SJ Like '%' || #{keyword} || '%'
			)
		</if>
	</sql>
	
<!-- 	<select id="proCprtnBbscttList" parameterType="proCprtnBbscttVO" resultType="proCprtnBbscttVO" > -->
<!-- 		select * from pro_Cprtn_Bbsctt -->
<!-- 	</select> -->
	
	<select id = "getTotal" parameterType="hashMap" resultType="int">
		select count(*) from notice
		where 1 = 1
		<include refid="where"></include>
	</select>
	
	<select id="list" parameterType="hashMap" resultType="proCprtnBbscttVO">
	    with t as (
	        select ROW_NUMBER() OVER(order by f.PRO_CPRTN_BBSCTT_NO DESC)RNUM,
	            f.PRO_CPRTN_BBSCTT_NO,
	            f.PRO_CPRTN_BBSCTT_SJ,
	            f.PRO_CPRTN_BBSCTT_CN,
	            f.PRO_CPRTN_BBSCTT_WR_DT,
	            f.PRO_CPRTN_BBSCTT_RDCNT,
	            f.PRO_ID 
	        from (
	            select PRO_CPRTN_BBSCTT_NO, PRO_CPRTN_BBSCTT_SJ, PRO_CPRTN_BBSCTT_CN, PRO_CPRTN_BBSCTT_WR_DT, PRO_CPRTN_BBSCTT_RDCNT, PRO_ID 
	            from PRO_CPRTN_BBSCTT
	            where 1 = 1
	            <include refid="where"></include>
	        ) f
	    )
	    select t.* from t
	    where t.rnum between (#{currentPage}*10)-(10-1) and (#{currentPage}*10)
	</select>
	
</mapper>