<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  
<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<style>
 body { background-color: #f5f7ff; }
 
@font-face {
    font-family: 'seolleimcool-SemiBold';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2312-1@1.1/seolleimcool-SemiBold.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'GmarketSansMedium';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

/* ì œëª© */
#balloon {
    position: absolute;
    margin-top: -90px;
    top: 0;
    left: 0;
    z-index: 0;
}

#modifyTitle,#proflPhoto {
    position: absolute;
    z-index: 1; /* í’ì„  ì´ë¯¸ì§€ ìœ„ì— ë‚˜íƒ€ë‚˜ë„ë¡ ì„¤ì • */
}

label {
    font-family: 'GmarketSansMedium';
    font-size: 17px !important;
}

input,p {
	font-family: 'GmarketSansMedium';
}
</style>

<script>
		
$(function(){
	
    /* ì–‘ì‹ ìë™ì…ë ¥ */
    $("#autobtn").on("click", function(event){
    	 event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë™ì‘ ë§‰ê¸°
    	 var info1=`ì˜¤ì˜¤ì˜¤`
    	 var info2=`ì˜¤ì˜¤ì˜¤`
    	 var info3=`ì˜¤ì˜¤ì˜¤`
    	 var info4=`ì˜¤ì˜¤ì˜¤`
    	 
        $("#proProflOnLiIntrcn").val(info1);
        $("#proProflContactPosblTime").val(info2);
        $("#proProflReqForm").val(info3);
        $("#proProflHist").val(info4);
        
    });
	
    console.log("ì§€ì—­ì½”ë“œë¥¼ ì´ë¦„ìœ¼ë¡œ");
    var bcityCode = $("#bcityCode").val();
    var brtcCode = $("#brtcCode").val();
    console.log("bcityCode : " + bcityCode + ", brtcCode : " + brtcCode);
    
    // AJAX í˜¸ì¶œ í›„ ì§€ì—­ ì½”ë“œë¥¼ ì´ë¦„ìœ¼ë¡œ ë³€ê²½
    $.ajax({
        url: "/proProfl/getNm",
        data: { "bcityCode": bcityCode, "brtcCode": brtcCode },
        type: "post",
        dataType: "json",
        success: function(data) {
            console.log("bcityNm : " + data.bcityNm +", brtcNm : " + data.brtcNm);
            $("#bcityCode").text(data.bcityNm); 
            $("#brtcCode").text(data.brtcNm); // ì˜µì…˜ì˜ í…ìŠ¤íŠ¸ ë³€ê²½
        	
        },
    });

    // #bcityNmì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í˜¸ì¶œë¨
    $("#bcityNm").change(function(){
        var selecBcity = $(this).val(); // ì„ íƒëœ ê´‘ì—­ì‹œ ì´ë¦„
        var brtcOptions = ""; // ì‹œ/êµ¬ ì˜µì…˜ì„ ì €ì¥í•  ë³€ìˆ˜
        
        // AJAX í˜¸ì¶œ í›„ ì‹œ/êµ¬ ëª©ë¡ ì—…ë°ì´íŠ¸
        $.ajax({
            type: "GET",
            url: "/proProfl/brtcList",
            data: { bcityNm: selecBcity },
            success: function(data){
                $.each(data, function(index, list){
                    brtcOptions += '<option value="' + list.brtcNm + '">' + list.brtcNm + '</option>';
                });
                $("#brtcNm").html('<option selected>ì§€ì—­(ì‹œ/êµ¬)</option>' + brtcOptions);
            },
            error: function(xhr, status, error) {
                console.log("Error: " + error);
            }
        });
    });
    
    
    /* ì œì¶œ í¼ ë§‰ê¸° */
    $("#frm").submit(function(event){
        var bcityNm = $("#bcityCode").text();
		var brtcNm = $("#brtcNm").val();
		var proProflOnLiIntrcn = $("#proProflOnLiIntrcn").val();
		var proProflReqForm = $("#proProflReqForm").val();
		var proProflHist = $("#proProflHist").val();
		var proProflContactPosblTime = $("#proProflContactPosblTime").val();
        
        console.log("bcityNmã„´ã„´" , bcityNm);
        console.log("brtcNmã„´ã„´" , brtcNm);
        
        if (!bcityNm || bcityNm === "") {
            Swal.fire({
                title: "ì§€ì—­ì„ ì„ íƒí•´ì£¼ì„¸ìš”",
                confirmButtonText: "í™•ì¸",
                icon: 'warning',
                customClass: {
                    title: 'swal-title'
                }
            });
            return false;
        }
        if (!brtcNm || brtcNm === "" || brtcNm === "ì§€ì—­(ì‹œ/êµ¬)") {
            Swal.fire({
                title: "ì‹œ/êµ¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”",
                confirmButtonText: "í™•ì¸",
                icon: 'warning',
                customClass: {
                    title: 'swal-title'
                }
            });
            return false;
        }
        if (!proProflOnLiIntrcn || proProflOnLiIntrcn === ""){
            Swal.fire({
                title: "í•œì¤„ì†Œê°œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
                confirmButtonText: "í™•ì¸",
                icon: 'warning',
                customClass: {
                    title: 'swal-title'
                }
            });
            return false;
        }
        if (!proProflReqForm || proProflReqForm === ""){
            Swal.fire({
                title: "ìš”ì²­ì„œ ì–‘ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
                confirmButtonText: "í™•ì¸",
                icon: 'warning',
                customClass: {
                    title: 'swal-title'
                }
            });
            return false;
        }
        if (!proProflHist || proProflHist === ""){
            Swal.fire({
                title: "ì„œë¹„ìŠ¤ ìƒì„¸ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
                confirmButtonText: "í™•ì¸",
                icon: 'warning',
                customClass: {
                    title: 'swal-title'
                }
            });
            return false;
        }
        if (!proProflContactPosblTime || proProflContactPosblTime === ""){
            Swal.fire({
                title: "ì—°ë½ê°€ëŠ¥ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
                confirmButtonText: "í™•ì¸",
                icon: 'warning',
                customClass: {
                    title: 'swal-title'
                }
            });
            return false;
        }
		event.preventDefault(); // í¼ ì œì¶œ ë§‰ê¸°
        
        Swal.fire({
            title: "ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤",
            confirmButtonText: "í™•ì¸",
            icon: 'success', 
            customClass: {
                title: 'swal-title'
            }
        }).then((result) => {
            if (result.isConfirmed) {
                $("#frm").off("submit").submit(); // í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í¼ ì œì¶œ
            }
        });

});
});



</script>
<br><br>
<!-- ì œëª© -->
<div style="position: absolute; top: 0; left: 0; width: 100%;" id="title">
    <img src="../resources/images/íŒ»ë§1.png" id="balloon" style=" opacity: 0.5; width: 500px; height:auto; margin:-40px 0 0 700px;">
    <br><br>
    <h2 id="modifyTitle" style="margin:135px 0 0 830px; text-align:center; font-family: 'seolleimcool-SemiBold'; color:#4e4c7c; text-shadow: -2px 0px white, 0px 2px white, 2px 0px white, 0px -2px white;">í”„ë¡œ í”„ë¡œí•„ ìˆ˜ì •</h2>
</div >
<%-- <p>${proProflVO}</p> --%>

<c:if test="${memSession == null && proSession != null}">
<form id="frm" name="frm" action="/proProfl/modifyProfl?proId=${proProflVO.proId}" method="get" >
	<div class="mb-3" style="margin: 150px 150px 0 150px;"> 
		<div class="form-group" id="proflPhoto" style="margin-left:750px;">
			<c:if test="${proVO.proProflPhoto==null}">
				<img src="/images/2024/profile.jpg" alt="profile" style="width:300px; height:300px; border-radius: 70%;">
			</c:if>
			<c:if test="${proVO.proProflPhoto!=null}">
				<img src="${proVO.proProflPhoto}" alt="profile" style="width:300px; height:300px; border-radius: 70%;">
			</c:if>
		</div>
	    <div class="form-group">
	        <label for="proId">ğŸ‘©â€ğŸ’¼ í”„ë¡œ ì•„ì´ë””</label>
	        <input type="text" name="proId" id="proId" value="${proProflVO.proId}" class="form-control" readonly style="width:200px;"/>
	    </div>
      <div class="form-group" >
         <label for="proProflOnLiIntrcn">âœ” í•œì¤„ì†Œê°œ</label>
         <input type="text" name="proProflOnLiIntrcn" id ="proProflOnLiIntrcn" value="${proProflVO.proProflOnLiIntrcn}" class="form-control" style="width:600px; justify-content: center;"/>
      </div>
      <div class="form-group">
          <label for="proProflContactPosblTime">ğŸ• ì—°ë½ ê°€ëŠ¥ ì‹œê°„</label>
          <input type="text" name="proProflContactPosblTime" id="proProflContactPosblTime" value="${proProflVO.proProflContactPosblTime}" class="form-control" style="width:200px;"/>
      </div>
	<div style="display: flex; flex-wrap: wrap;">
		<div class="form-group">
			<label for="bcityNm">âœ” ì§€ì—­(ê´‘ì—­ì‹œ)</label>
			   <select id="bcityNm" name="bcityNm" class="form-control" style="width:200px; font-family: 'GmarketSansMedium';">
			      <option selected id="bcityCode">${proProflVO.bcityCode}</option>
			      <c:forEach items="${bcityVOList}" var="bcityVO">
			         <option><c:out value="${bcityVO.bcityNm}"/></option>
			      </c:forEach>
			   </select>
		</div> 
		<div class="form-group">
			<label for="brtcNm" style="margin-left:15px;">âœ” ì§€ì—­(ì‹œ/êµ¬)</label>
				<select id="brtcNm" name="brtcNm" class="form-control" style="width:200px; margin-left:15px; font-family: 'GmarketSansMedium';">
				    <option id="brtcCode" selected>${proProflVO.brtcCode}</option>
				</select>
		</div>
	</div>
		<p style="margin:-10px 0 30px 0 ; color:#adadad;">ğŸ“Œ ìƒì„¸ ì£¼ì†ŒëŠ” ë§ˆì´í˜ì´ì§€ì—ì„œ ìˆ˜ì •í•˜ì„¸ìš”!<p>
	
      <div style="display: flex; flex-wrap: wrap;">
      <div class="form-group">
         <label for="proProflReqForm">ğŸ“ƒ ìš”ì²­ì„œ ì–‘ì‹</label>
        <textarea name="proProflReqForm" id="proProflReqForm" class="form-control" style="font-family: 'GmarketSansMedium'; width:500px; height:400px; overflow: auto;">${proProflVO.proProflReqForm}</textarea>
      </div>
      <div class="form-group">
         <label for="proProflHist" style="margin-left:15px;">ğŸ’¬ ì„œë¹„ìŠ¤ ìƒì„¸ì„¤ëª…</label>
		<textarea  rows="2"Â cols="20"Â wrap="hard" name="proProflHist" id="proProflHist" class="form-control" style="font-family: 'GmarketSansMedium'; width:500px; height:400px; margin-left:15px; overflow: auto;">${proProflVO.proProflHist}</textarea>
      </div> 
      </div>
      <div class="form-group" style="float:right; margin-right:60px;">
	      <button id="autobtn" style="border:none; background:none;">
	      	<img src="../resources/images/ë²„íŠ¼.png" style="width:50px; height:50px;" />
	      </button>
         <button id="submitBtn" class="btn btn-outline-primary btn-fw" style="font-family: 'GmarketSansMedium';">ìˆ˜ì •í•˜ê¸°</button>
         <button onclick="history.back()" class="btn btn-outline-secondary btn-fw" style="font-family: 'GmarketSansMedium';">ë’¤ë¡œê°€ê¸°</button>
      </div>
</div>

</form>
</c:if>

