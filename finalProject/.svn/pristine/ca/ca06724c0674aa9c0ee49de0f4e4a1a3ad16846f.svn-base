<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<script type="text/javascript" src="/resources/js/jquery.min.js"></script>
<link rel="stylesheet" href="/resources/css/sweetalert2.min.css">
<script src="/resources/js/sweetalert2.min.js"></script>
<style>
.thumbnail{
	width: auto;
	height: auto;
/* 	border-radius: 20px; */
}
.profile{
	width: 24px;
	height: 24px;
	border-radius: 12px;
}
.eachAlbum{
	color:black;
}
.eachAlbum:hover{
	color:#4B49AC;
	text-decoration:none;
}
.btnSelect{
	margin-left: 15px;
}
table{
	width: 100%;
	height: 25px;
	margin-bottom:15px;
}
</style>
<script>
$(document).ready(function(){
	var countOndycl = $("#countOndycl").val();
	var forDate = {};
	for(var i=0;i<countOndycl;i++){
		var inputId = "#startDate" + i;
		var dateSpan = "#dateSpan" + i;
		var bfFormat = $(inputId).val();
		forDate[i] = formatDate(bfFormat);
		
		$(dateSpan).text(forDate[i]);
	}
})
function formatDate(str){
	var year = str.substring(0,4);
	var month = str.substring(4,6);
	var day = str.substring(6,8);
	return year+"."+month+"."+day;
}
$(function(){
// 	title writer date keyword searchWordDiv searchDateDiv
	//검색조건 제목
	$("#title").on("click",function(){
		const btnElement = document.getElementById('keyword');
		btnElement.innerText = '제목';
		$('#firstInput').attr("type", "text");
		$('#secondInput').attr("type", "hidden");
		$("#searchKeyword").val("title");
	})
	//검색조건 작성자
	$("#writer").on("click",function(){
		const btnElement = document.getElementById('keyword');
		btnElement.innerText = '작성자';
		$('#firstInput').attr("type", "text");
		$('#secondInput').attr("type", "hidden");
		$("#searchKeyword").val("writer");
	})
	//검색조건 날짜
	$("#date").on("click",function(){
		const btnElement = document.getElementById('keyword');
		btnElement.innerText = '날짜';
		$('#firstInput').attr("type", "date");
		$('#secondInput').attr("type", "date");
		$("#searchKeyword").val("date");
	})
})
</script>
<div class="container col-lg-9">
	<div class="row">
		<h2 class="card-title">원데이클래스 게시판</h2>
		<button type="button" class="btn btn-inverse-primary btn-fw btnSelect"><i class="mdi mdi-format-list-bulleted"></i>전문분야</button>
		<button type="button" class="btn btn-inverse-primary btn-fw btnSelect"><i class="mdi mdi-format-list-bulleted"></i>지역</button>
		<div class="col-md-6"></div>
		<c:if test="${memSession == null && proSession != null}">
			<div><button type="button" class="btn btn-inverse-primary btn-fw btnSelect">글쓰기</button></div>
		</c:if>
	</div>
		<p class="card-description">
			<b>${countOndycl}</b> 개의 원데이클래스
			<input type="hidden" value="${countOndycl}" id="countOndycl">
		</p>
	<hr>
</div>
	<input type="hidden" id="searchKeyword" value="">
<!-- <div class="row" style="margin-bottom:15px;"> -->
<!-- 			<button type="button" class="btn btn-inverse-primary btn-fw btnSelect"><i class="mdi mdi-format-list-bulleted"></i>전문분야</button><button type="button" class="btn btn-inverse-primary btn-fw btnSelect"><i class="mdi mdi-format-list-bulleted"></i>지역</button> -->
<!-- </div> -->
<!-- <button class="btn btn-inverse-primary btn-fw btnSelect dropdown-toggle" -->
<!-- 	type="button" id="keyword" data-toggle="dropdown" aria-haspopup="true" -->
<!-- 	aria-expanded="false">검색조건</button> -->
<!-- <div class="dropdown-menu" style=""> -->
<!-- 	<a class="dropdown-item" href="#" id="title">제목</a> -->
<!-- 	<a class="dropdown-item" href="#" id="writer">작성자</a> -->
<!-- 	<div role="separator" class="dropdown-divider"></div> -->
<!-- 	<a class="dropdown-item" href="#" id="date">날짜</a> -->
<!-- </div> -->
<!-- <!-- 수정 -->
<!-- <div class="row"> -->
<!--     <div class="col-md-7 searchWordDiv"  style="display:none;"> -->
<!--         <input type="text" class="form-control" aria-label="Text input with dropdown button"> -->
<!--     </div> -->
<!--     <div class="col-md-2 searchWordDiv"   style="display:none;"> -->
<!--         <button class="btn btn-primary" type="button" id="btnSearch">검색</button> -->
<!--     </div> -->
<!-- </div> -->
<!-- 	<!-- 수정 끝 -->
<!-- <!-- 		<div id="searchWordDiv" class="input-group" style="display:none;"> -->
<!-- <!-- 			<input type="text" class="form-control" -->
<!-- <!-- 				aria-label="Text input with dropdown button"> -->
<!-- <!-- 			<div class="input-group-append"> -->
<!-- <!-- 				<button class="btn btn-sm btn-primary" type="button" id="btnSearch">검색</button> -->
<!-- <!-- 		    </div> -->
<!-- <!-- 		</div> -->
<!-- 		<!-- 얘를 드롭다운에서 날짜 선택했을 때 보이게만 바꾸면 될듯? -->
<!-- <div class="row"> -->
<!-- 	<div class="col-md-7 searchDateDiv"><input type="date" class="form-control" style="width:150px;"> ~ <input type="date" class="form-control" style="width:150px;"></div> -->
<!-- 	<div class="col-md-2 searchDateDiv"><button class="btn btn-primary" type="button" id="btnSearch">검색</button></div> -->
<!-- </div> -->
<div class="container col-lg-9"">
	<table>
		<tr>
			<td>
				
			</td>
			<td></td>
			<td></td>
			<td>
				<button class="btn btn-inverse-primary btn-fw btnSelect dropdown-toggle"
					type="button" id="keyword" data-toggle="dropdown" aria-haspopup="true"
					aria-expanded="false">제목</button>
				<div class="dropdown-menu" style="">
					<a class="dropdown-item" href="#" id="title">제목</a>
					<a class="dropdown-item" href="#" id="writer">작성자</a>
					<div role="separator" class="dropdown-divider"></div>
					<a class="dropdown-item" href="#" id="date">날짜</a>
				</div>
			</td>
			<td colspan='2'>
				<input type="text" id="firstInput" style="width:100%;" class="form-control" aria-label="Text input with dropdown button">
			</td>
			<td>
				<input type="hidden" id="secondInput" style="width:100%;" class="form-control" aria-label="Text input with dropdown button">
			</td>
			<td><button class="btn btn-primary" type="button" id="btnSearch">검색</button></td>
		</tr>
	</table>
</div>
<div class="container col-lg-9">
	<div class="row row-cols-1 row-cols-sm-1 row-cols-md-4 g-3">
		<c:forEach var="vOndyclProUsersVO" items="${vOndyclProUsersVOList}"
			varStatus="stat">
			<a href="#" class="eachAlbum">
			<div class="col" style="margin-bottom:15px;">
				<div class="card shadow-sm">
					<img src="${vOndyclProUsersVO.ondyclThumbPhoto}" width="100%"
						height="225">
					<div class="card-body">
						<p class="card-text">
							<span style="font-size:1.2rem;"><b>${vOndyclProUsersVO.ondyclNm}</b></span>
							<div id="dateSpan${stat.index}"></div>
							<input type="hidden" id="startDate${stat.index}" value="${vOndyclProUsersVO.ondyclSchdulDe}">
						</p>
						<div class="d-flex justify-content-between align-items-center">
						<small class="text-body-secondary">${vOndyclProUsersVO.spcltyRealmCode}</small>
							<div class="btn-group">
								<!-- 											<button type="button" class="btn btn-sm btn-outline-secondary">عرض</button> -->
								<!-- 											<button type="button" class="btn btn-sm btn-outline-secondary">تعديل</button> -->
								<c:if test="${empty vOndyclProUsersVO.proProflPhoto}">
									<img class="profile" src="/images/2024/profile.jpg">
								</c:if>
								<c:if test="${not empty vOndyclProUsersVO.proProflPhoto}">
									<img class="profile" src="${vOndyclProUsersVO.proProflPhoto}">
								</c:if>
								<span>${vOndyclProUsersVO.userNcnm}</span>
							</div>
						</div>
					</div>
				</div>
			</div>
			</a>
		</c:forEach>
	</div>
</div>
