<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
a, a:link {
  color: #000;
  text-decoration: none;
  font-family: 'Recipekorea';
}

/* 네비게이션 메뉴 */
.sidenav {
  width: 200px;
  position: fixed;
  z-index: 1;
  font-size: 18px;
  top: 153px;
  left: 45px;
  border-bottom: 1px solid lightgray;
  overflow-x: hidden;
  padding: 15px 0;
  text-align: center;
}
.sidenav p {
  padding: 6px 8px 6px 16px;
  text-decoration: none;
  font-size: 18px;
  display: block;
  color: #000;
}
.sidenav a, .sidenav a:link {
  padding: 6px 8px 6px 16px;
  text-decoration: none;
  font-size: 18px;
  color: #000;
  display: block;
  color: #000;
  font-family: 'GmarketSansLight';
  position: relative;
  overflow: hidden;
}
.sidenav a::after {
  content: '';
  display: block;
  position: absolute;
  bottom: 11px;
  left: 50%; /* 배경의 시작 위치를 텍스트 중앙으로 설정 */
  transform: translateX(-50%); /* 가로 방향으로 이동시킴 */
  z-index: -1;
  width: 0; /* 초기 가로 크기를 0으로 설정 */
  height: 30%;
  background: rgba(182, 102, 210, 0.5); /* 투명한 연보라색 배경 */
  transition: width .3s;
}
.sidenav a:hover::after {
  width: 90%; /* 호버 시 가로 크기를 100%로 확장 */
}
</style>
<script  type="text/javascript" src="/resources/js/jquery.min.js"></script>
<script type="text/javascript">

$(function(){
	
	   $("#btnSearch").on("click",function(){
		      let keyword = $("input[name='keyword']").val();
		      
		      console.log("keyword:"+keyword);
		      
		      let currentPage = "1";
		      
		      let data = {
		         "keyword":keyword,
		         "currentPage":currentPage
		      };
		      console.log("data:"+data)
		      
		      $.ajax({
		         url:"/proCprtnBbsctt/listAjax",
		         contentType:"application/json;charset=utf-8",
		         data:JSON.stringify(data),
		         type:"post",
		         dataType:"json",
		         success:function(result){
		            console.log("result:",result);
		            
		            let str = "";
		            
		            $("#proCprtnBbscttTbody").html("");
		         
		            $.each(result.content,function(idx, proCprtnBbscttVO){
 		               str += "<tr onclick=\"location.href='/proCprtnBbsctt/detail?proCprtnBbscttNo=" + proCprtnBbscttVO.proCprtnBbscttNo + "'\" style=\"cursor: pointer;\">";
		               //str += "<tr>";
		               str += "<td>"+proCprtnBbscttVO.rnum+"</td>";		   
		               str += "<td>"+proCprtnBbscttVO.proCprtnBbscttSj+"</td>";
		               str += "<td>"+new Date(proCprtnBbscttVO.proCprtnBbscttWrDt).toLocaleString()+"</td>";
		               str += "<td>"+proCprtnBbscttVO.proCprtnBbscttRdcnt+"</td>";
		               str += "<td>"+proCprtnBbscttVO.proId+"</td>";
		               str += "</tr>";
		            
		            });   
		            
		            $("#proCprtnBbscttTbody").append(str);
		            $("#divPagingArea").html(result.pagingArea);
		            
		            
		         }
		         
		      });
		      
		   });
	
	   let currentPage  = "${param.currentPage}";
	   console.log("currentPage",currentPage);
	   if(currentPage==""){
	      currentPage = 1;
	      
	   }
	   
	   let data = {
	      "keyword":"${param.keyword}",
	      "currentPage":currentPage
	   };
	   console.log("data:",data);
	   
	   $.ajax({
	      url : "/proCprtnBbsctt/listAjax?currentPage="+currentPage,
	      type : "post",
	      data : JSON.stringify(data),
	      contentType: "application/json;charset=utf-8",
	      dataType:"json",
	      success : function(result){
	         console.log("result:",result);
	      
	         let str = "";
	         
	         $("#proCprtnBbscttTbody").html("");
	         
	         $.each(result.content,function(idx, proCprtnBbscttVO){

 	        	   str += "<tr onclick=\"location.href='/proCprtnBbsctt/detail?proCprtnBbscttNo=" + proCprtnBbscttVO.proCprtnBbscttNo + "'\" style=\"cursor: pointer;\">";
				   //str += "<tr>";
	               str += "<td>"+proCprtnBbscttVO.rnum+"</td>";		   
	               str += "<td>"+proCprtnBbscttVO.proCprtnBbscttSj+"</td>";
	               str += "<td>"+new Date(proCprtnBbscttVO.proCprtnBbscttWrDt).toLocaleString()+"</td>";
	               str += "<td>"+proCprtnBbscttVO.proCprtnBbscttRdcnt+"</td>";
	               str += "<td>"+proCprtnBbscttVO.proId+"</td>";
	               str += "</tr>";
	            
	            
	         });
	         $("#proCprtnBbscttTbody").append(str);
	         console.log(result.pagingArea);
	         $("#divPagingArea").html(result.pagingArea);
	         
	         
	         sessionStorage.setItem("total",result.total);
	      }
	      
	   });
	   
	   
	   
});



</script>
<body>	

<div class="container col-lg-12">
	<div class="col-12 stretch-card grid-margin grid-margin-md-0">
		<div class="card data-icon-card-primary">
			<div class="card-body">
				<p class="card-title text-white"></p>
				<div class="row">
					<div class="col-8 text-white">
						<h3>프로 협업 게시판</h3>
						<p class="text-white font-weight-500 mb-0">
						 
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


	<div class="col-lg-12 grid-margin stretch-card">
		<div class="card">
			<div class="card-body">
				<div class="row">
					<div class="col-md-6" style="margin-top: 10px;">
						
					</div>
					<div class="col-md-6 form-group text-center">
                    <div class="input-group">
                        <input type="text" name="keyword" id="keyword" value="${param.keyword}" class="form-control" placeholder="검색어를 입력하세요" aria-label="">
                        <div class="input-group-append">
                            <button class="btn btn-sm btn-primary" id="btnSearch" type="button">
                                Search <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
			</div>
			
	<div class="sidenav">
	<p style="text-align: center;">
		<b style="font-family: GmarketSansMedium;">BOARD MENU</b>
	</p>
	<hr>
	<a href="#">자유 게시판</a> 
	<a href="#">후기 게시판</a>
	<a href="/proHunting/list">프로 구인 게시판</a> 
	<a href="/proCprtnBbsctt/list">프로 협업 게시판</a>
	</div>	

				<div class="table-responsive" style="margin-top: 45px;">
					<table class="table table-striped text-center table-hover">
						<thead>
							<tr class="text-white" style="background-color: #4b49ac">
								<th style="width:10%">글번호</th>
								<th style="width:50%">게시글제목</th>
								<th style="width:10%">작성일자</th>
								<th style="width:10%">조회수</th>
								<th style="width:10%">작성자</th>
								
							</tr>
						</thead>
						
						 <tbody id="proCprtnBbscttTbody"> 
						 </tbody>
						
					
						
					</table>
				</div>			
				<div class="row justify-content-center" style="margin-top: 20px;">
					<div class= "row" id="divPagingArea"></div>
				</div>
			</div>
		</div>
	</div>
	

<a href="/proCprtnBbsctt/create" class="btn btn-inverse-primary btn-fw">글쓰기</a>
</body>
</html>