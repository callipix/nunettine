package kr.or.ddit.chatting.service;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.socket.WebSocketSession;

import kr.or.ddit.chatting.mapper.ChatMapper;
import kr.or.ddit.chatting.vo.ChatJoinRoomVO;
import kr.or.ddit.chatting.vo.ChatJoinView;
import kr.or.ddit.chatting.vo.ChatRelayVO;
import kr.or.ddit.chatting.vo.ChatRoomVO;
<<<<<<< .mine
import kr.or.ddit.chatting.vo.MessageVO;
||||||| .r397018
=======
import lombok.extern.slf4j.Slf4j;
>>>>>>> .r397570
@Service
@Slf4j
public class ChatServiceImpl implements ChatService {

	@Autowired
	public ChatMapper chatMapper;
	
	Map<String , List<WebSocketSession>> map = new HashMap<>();
	
	// 방생성
	@Override
	public int insertRoom(ChatRoomVO chatRoomVO) {
		return this.chatMapper.insertRoom(chatRoomVO);
	}
	// 방리스트
	@Override
	public List<ChatRoomVO> chatRoomList() {
		
		return this.chatMapper.chatRoomList();
	}
	public ChatJoinRoomVO getRoomJoin(int roomNo) {
		return this.getRoomJoin(roomNo);
	}
	// 방참가(이미 생성된 방)
	@Override
	public int joinChat(ChatRelayVO chatRelayVO) {
		log.info("chatRelayVO" , chatRelayVO);
		return this.chatMapper.joinChat(chatRelayVO);
	}
	// 해당 채팅방에 존재하는 인원수
	@Override
	public int roomMemberCount(int roomNo) {
		return this.chatMapper.roomMemberCount(roomNo);
	}

	// 해당 채팅방에 존재하는 유저 리스트
	@Override
	public List<ChatRoomVO> getRoomUsers(int roomNo) {
		
		return this.chatMapper.getRoomUsers(roomNo);
	}
<<<<<<< .mine

	@Override
	public int insertMSG(MessageVO message) {
		return this.chatMapper.insertMSG(message);
	}

	@Override
	public ChatRoomVO getRoom(int roomNo) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public ChatRelayVO getRelay(int roomNo) {
		return this.chatMapper.getRelay(roomNo);
	}
||||||| .r397018
=======

	@Override
	public int joinCheck(Map<String, Object> chkCount) {
		return this.chatMapper.joinCheck(chkCount);
	}

	@Override
	public ChatJoinView choiceRoom(int roomNo) {
		return this.chatMapper.choiceRoom(roomNo);
	}

>>>>>>> .r397570
	
}
