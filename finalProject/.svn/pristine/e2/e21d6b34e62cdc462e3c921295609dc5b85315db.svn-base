<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<script	src="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/ckeditor.js"></script>
<script	src="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/translations/ko.js"></script>
<script type="text/javascript" src="/resources/js/jquery-3.6.0.js"></script>
<style>
.ck-editor__editable {
	min-height: 400px;
}
label {
	display: block;
}
/* 글 내용의 경계선 표시 */
.content{
	border: 1px dotted #cecece;
}
/* 글 내용안에 있는 이미지의 크기 제한 */
.content img{
	max-width: 100%;
}
/* 댓글에 관련된 css */
.comments ul{
	padding: 0;
	margin: 0;
	list-style-type: none;
}
.comments ul li{
	border-top: 1px solid #888; /* li 의 윗쪽 경계선 */
}
.comments dt{
	margin-top: 5px;
}
.comments dd{
	margin-left: 26px;
}
.comments form textarea, .comments form button{
	float: left;
}
.comments li{
	clear: left;
}
.comments form textarea{
	width: 85%;
	height: 100px;
}
.comments form button{
	width: 15%;
	height: 100px;
}
/* 댓글에 댓글을 다는 폼과 수정폼을 일단 숨긴다. */
.comment form{
	display: block;
}
.comment{
	position: relative;
}
.comment .reply_icon{
	width: 8px;
	height: 8px;
	position: absolute;
	top: 10px;
	left: 30px;
}
.comments .user-img{
	width: 20px;
	height: 20px;
	border-radius: 50%;
}
</style>
<script>
/*
 게시글 번호(자동증가 , sequence)		proStoryBbscttNo	
 게시글 제목(직접입력)					proStoryBbscttSj
 게시글 내용(직접입력)					proStoryBbscttCn
 게시글 작성일자(sysdate)				proStoryBbscttWrDt
 게시글 추천수(별도)					proStoryBbscttRecommend
 게시글 조회수(별도)					proStoryBbscttRdcnt
 프로이야기게시글썸네일사진(직접입력)		proStoryBbscttThumbPhoto
 통합첨부파일(사진, 직접입력)			sprviceAtchmnflNo
 프로아이디							proId
 */
$(function() {

	let storyNo = ${getStory.proStoryBbscttNo};
	
	const storyGood = document.querySelector("#good");
	
	storyGood.addEventListener("click" , e => {
		
		console.log("좋아요 체크")
		
		let goodChk;
		
	})
	
	
	
	$("#update").on("click" , function(){
		
		if(confirm("게시글 수정?")){
			
			$.ajax({
				url : "/prostory/update?storyNo="+ storyNo,
				type : "get",
				data : storyNo,
				success : function(result){
					console.log("수정페이지 이동 테스트");
					location.href = "/prostory/update?storyNo="+ storyNo;
				}
					
			})
			
		};
			
	})
	
	$("#delete").on("click" , function(){
		
		if(!confirm("확인 누르면 삭제")){
			return;
		} else {
			console.log("삭제?");
		}
		
		console.log("storyNo ::: " + storyNo);
		
		$.ajax({
			url : "/prostory/delete?storyNo="+storyNo,
			type : "post",
			dataType : "text",
			data : { storyNo : storyNo },
			success : function(result){
				
				if(result > 0){
					alert("삭제 성공");
					location.href = "/prostory/main";
				} else{
					alert("삭제 실패");
					location.href = "/prostory/main";
				}
				console.log("삭제 테스트 : " + result)
			}
		})
	})
	
	$("#comment").on("click" , function(){
		
		if(confirm("댓글 작성?"));
		
		$.ajax({
			url : "localhost:8080/prostory/reply",
			type : "post",
	// 		data : ,
			success : function(result){
				
				console.log("삭제 테스트 : " + result)
			}
		})
	})
	
})
</script>

<div id="get">
<div data-v-78548f8c="" data-v-09a142b7="" class="soomgo-life-post-detail is-test-b">
	<div data-v-00e3049a="" data-v-78548f8c="" class="post-header">
	
	<span class="like-area">
                        <!-- 좋아요를 누른 적이 없거나, 로그인 X -->
                        <c:if test="${empty likeCheck}">
                            <i class="fa-regular fa-heart" id="storyGood"></i>
                        </c:if>
                        
                        <!-- 좋아요를 누른 적이 있을 때 -->
                        <c:if test="${!empty likeCheck}">
                            <i class="fa-solid fa-heart" id="boardLike"></i>
                        </c:if>
                        <span>${board.likeCount}</span>
                    </span>
<button type="button" id="good">좋아요</button>
<button type="button" id="update">게시글 수정</button>
<button type="button" id="delete">게시글 삭제</button>
		<div data-v-07289ee0="" data-v-00e3049a=""
			class="post-category-subject">
			<ol data-v-07289ee0="" class="category-breadcrumb list-inline">
				<li data-v-07289ee0="" class="category-breadcrumb-item"><a
					data-v-07289ee0="" href="/community/soomgo-life/?from=breadcrumb"
					class="breadcrumb-item" data-testid="soomgo-life-home-breadcrumb"><span
						data-v-746dd3c0="" data-v-07289ee0=""
						class="legacy-typography interface-body2 gray-400 text-align-left">커뮤니티</span></a></li>
				<p data-v-07289ee0="" class="breadcrumb-divider"></p>
				<li data-v-07289ee0="" class="category-breadcrumb-item"><a
					data-v-07289ee0=""
					href="/community/soomgo-life/soomgo-story?from=breadcrumb"
					class="breadcrumb-item"><span data-v-746dd3c0=""
						data-v-07289ee0=""
						class="legacy-typography interface-body2 gray-400 text-align-left">숨고이야기</span></a></li>
			</ol>
		</div>
	</div>
	<hr data-v-78548f8c="" class="hr-divider">
		<div data-v-796eb1b2="" data-v-78548f8c="" class="body-container">
				<div data-v-796eb1b2="" class="body-contents">
				${getStory.proStoryBbscttCn}
				</div>
		</div>
	</div>
</div>
	<div class="card-footer">
		<form action="#" name="frm" class="forms-sample" method="post" enctype="multipart/form-data">
		    <div class="form-group">
		      <input type="text" class="form-control" placeholder="댓글을 입력하세요" required>
		    </div>
		    <button type="button" id="comment" class="btn btn-primary">작성</button>
		</form>
		  <div class="comments mt-3"></div>
	</div>
	<hr data-v-78548f8c="" class="hr-divider wide-divider">
	<!---->
	<!---->
