<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.onedayclass.mapper.OnedayClassMapper">
	
	<!-- 원데이클래스 리스트 출력 -->
	<resultMap type="vOndyclProUsers" id="vOndyclProUsersMap">
		<result property="proId" column="PRO_ID"/>
		<result property="proMbtlnum" column="PRO_MBTLNUM"/>
		<result property="sexdstnTy" column="SEXDSTN_TY"/>
		<result property="email" column="EMAIL"/>
		<result property="proProflPhoto" column="PRO_PROFL_PHOTO"/>
		<result property="spcltyRealmCode" column="SPCLTY_REALM_CODE"/>
		<result property="ondyclNo" column="ONDYCL_NO"/>
		<result property="ondyclNm" column="ONDYCL_NM"/>
		<result property="ondyclCn" column="ONDYCL_CN" jdbcType="CLOB" javaType="java.lang.String"></result>
		<result property="ondyclRegistDt" column="ONDYCL_REGIST_DT"/>
		<result property="ondyclPc" column="ONDYCL_PC"/>
		<result property="ondyclPsncpa" column="ONDYCL_PSNCPA"/>
		<result property="ondyclDelType" column="ONDYCL_DEL_TYPE"/>
		<result property="ondyclDelDt" column="ONDYCL_DEL_DT"/>
		<result property="ondyclThumbPhoto" column="ONDYCL_THUMB_PHOTO"/>
		<result property="ondyclSchdulDe" column="ONDYCL_SCHDUL_DE"/>
		<result property="ondyclSchdulBeginTime" column="ONDYCL_SCHDUL_BEGIN_TIME"/>
		<result property="ondyclSchdulEndTime" column="ONDYCL_SCHDUL_END_TIME"/>
	</resultMap>
	<select id="vOndyclProUsersVOList" resultMap="vOndyclProUsersMap">
		SELECT O.ONDYCL_NO, O.ONDYCL_NM, O.ONDYCL_CN, TO_DATE(O.ONDYCL_REGIST_DT,'YYYY.MM.DD HH24:MI')
		    , O.ONDYCL_PC, O.ONDYCL_PSNCPA, O.ONDYCL_DEL_TYPE, O.ONDYCL_DEL_DT
		    , O.ONDYCL_THUMB_PHOTO, O.PRO_ID
		    , P.PRO_MBTLNUM, P.SEXDSTN_TY, P.EMAIL, P.PRO_PROFL_PHOTO, P.SPCLTY_REALM_CODE
		    , U.USER_NM, U.EMPLYR_TY, U.SECSN_AT, U.USER_NCNM
		    , B.ONDYCL_SCHDUL_DE, B.ONDYCL_SCHDUL_BEGIN_TIME, B.ONDYCL_SCHDUL_END_TIME
		FROM ONDYCL O, PRO P, USERS U, ONDYCL_SCHDUL B
		WHERE O.PRO_ID = P.PRO_ID
		AND	P.PRO_ID = U.USER_ID
		AND O.ONDYCL_NO = B.ONDYCL_NO
	</select>
	
	<!-- 프로 카테고리 이름 출력 -->
	<select id="getCodeNm"	parameterType="String" resultType="String">
		SELECT SPCLTY_REALM_NM
		FROM SPCLTY_REALM
		WHERE SPCLTY_REALM_CODE = #{codeCd}
	</select>
	
	<!-- 원데이클래스 총 갯수 -->
	<select id="countOndycl" resultType="int">
		SELECT COUNT(*) FROM ONDYCL
	</select>
</mapper>