<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<script type="text/javascript" src="/resources/js/jquery.min.js"></script>


<head>
<title>프로 프로필</title>
</head>

<script>
$(document).ready(function(){

    $("#bcityNm").change(function(){
        var selecBcity = $(this).val(); // 선택된 광역시
        var brtcOptions = ""; // 시/구 옵션을 저장할 변수
        
        $.ajax({
            type: "GET",
            url: "/proProfl/brtcList",
            data: { bcityNm: selecBcity },
            success: function(data){
                $.each(data, function(index, list){
                     brtcOptions += '<option value="' + list.brtcNm + '">' + list.brtcNm + '</option>';
                });
                $("#brtcNm").html('<option selected>지역(시/구)</option>' + brtcOptions);
            },
            error: function(xhr, status, error) {
                console.log("Error: " + error);
            }
        });
    });
});

$(function(){
	 $(".btnPrev").on("click", function(event){
	        event.preventDefault(); // 기본 제출 동작 막기
	    });
	
    $(".btnNext").on("click", function(event){
        event.preventDefault(); // 기본 제출 동작 막기
    });

	$("#frm").submit(function(event){
		
		var proProflOnLiIntrcn = $("#proProflOnLiIntrcn").val();
		if (!proProflOnLiIntrcn || proProflOnLiIntrcn.trim() == "") {
		    alert("프로필 한줄 소개를 적어주세요");
		    return false;
		}
		var proProflContactPosblTime = $("#proProflContactPosblTime").val();
		if(!proProflContactPosblTime || proProflContactPosblTime.trim()==""){
			alert("연락 가능 시간을 적어주세요");
			return false;
		}
		var proProflReqForm = $("#proProflReqForm").val();
		if(!proProflReqForm || proProflReqForm.trim()==""){
			alert("요청시 양식을 적어주세요");
			return false;
		}
		var proProflHist = $("#proProflHist").val();
		if(!proProflHist || proProflHist.trim()==""){
			alert("프로 상세 이력을 적어주세요");
			return false;
		}
		
		var brtcNm = $("#brtcNm").val();
		if (!brtcNm || brtcNm == "지역(시/구)") {
		    alert("지역을 선택해주세요");
		    return false;
		}
		
	});

});
</script>
<!-- 
요청URI : /createPost
요청파라미터 : {PRO_ID=protest100, PRO_PROFL_ON_LI_INTRCN=반려동물 산책/돌봄 자신있습니다, PRO_PROFL_CONTACT_POSBL_TIME=10:00 ~ 21:00, 
              PRO_PROFL_REQ_FORM=반려동물 이름:  종류: , PRO_PROFL_HIST=반려견 산책대회 우승자, BCITY_CODE=25, BRTC_CODE=25030}
요청방식 : post
 -->
<input type="hidden" id="sessionId" value="${proSession.userId}" />
<head>
<title>프로 프로필 작성</title>
<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
<script src="/resources/js/bootstrap.min.js"></script>
<style>
  body { background-color: #fafafa; }
  .container { margin: 0px 150px auto; max-width: 960px; }
</style>
</head>

<script type="text/javascript" src="https://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
<form id="frm" name="frm" action="/proProfl/createPost" method="post" >
  <div class="container">
    <div style="display: flex; flex-wrap: wrap; align-items: center;">
    	<img src="../resources/images/프로 프로필.png" style="width:50px;" />
    	<h3 style="margin: 15px 0 0 10px;">프로프로필 작성</h3>
    </div>
    <br><br>
	<div id="myWizard">
		<ul class="nav nav-tabs" id="myTab" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" 
				aria-selected="true">기본정보</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
			    aria-controls="profile" aria-selected="false">프로필 정보</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab"
				aria-controls="contact" aria-selected="false">요청서 양식</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact2" role="tab"
				aria-controls="contact" aria-selected="false">이력 작성</a>
			</li>
		</ul>
		<div class="tab-content" id="myTabContent">
			<div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab" style="margin-top:40px;">
				<div style="display: flex; flex-wrap: wrap; margin-left:100px;">
					<div class="form-group">
						<c:if test="${vProUsersVO.proProflPhoto == null}">
							<img src="/images/2024/profile.jpg" class="img-lg rounded-circle mb-3" alt="profile" style="width:200px; height:200px; border-radius: 70%;" />
						</c:if>
						<c:if test="${vProUsersVO.proProflPhoto != null}">
							<img src="${vProUsersVO.proProflPhoto}" class="img-lg rounded-circle mb-3" alt="profile" style="width:200px; height:200px; border-radius: 70%;">
						</c:if>
					</div>
					<hr style="border: none; border-left: 1px solid #CED4DA; height: 200px; margin-left:100px;">
					<div class="form-group" style="margin: 20px 0 0 100px;">
						<label for="proId">아이디</label><br>
						<input id="proId" name="proId" value="${proSession.userId}" style="border:none; font-size:20px;" readonly/>
						<div class="form-group" style="margin-top:20px;">
							<label>닉네임</label>
							<h4 style="margin-top:10px;"><b>${vProUsersVO.userNcnm}</b></h4>
							<p style="border: 1px solid #CED4DA; border-radius: 20px; display: inline-block; margin-top:20px;">&nbsp;&nbsp;${proBun}&nbsp;&nbsp;</p>
						</div>
					</div>
	            </div>
			</div>
			<div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab" style="margin-left:20px;">
				<div class="form-group">
				   <label for="proProflOnLiIntrcn">한줄소개</label>
				   <input type="text" id="proProflOnLiIntrcn" name="proProflOnLiIntrcn" class="form-control" style="width:600px; justify-content: center;"/>
				</div>
				<div class="form-group">
				   <label for="proProflContactPosblTime">연락 가능 시간</label>
				   <input type="text" name="proProflContactPosblTime" id="proProflContactPosblTime" class="form-control" placeholder="예) 9:00 ~ 10:00" style="width:200px;"/>
				</div>
	            <div style="display: flex; flex-wrap: wrap;">
					<div class="form-group">
						<label for="bcityNm">지역(광역시)</label>
							<select id="bcityNm" name="bcityNm" class="form-control">
								<option selected>지역(광역시)</option>
								<c:forEach items="${bcityVOList}" var="bcityVO">
								<option><c:out value="${bcityVO.bcityNm}"/></option>
								</c:forEach>
							</select>
						</div> 
					<div class="form-group">
					    <label for="brtcNm" style="margin-left:15px;">지역(시/구)</label>
						<select id="brtcNm" name="brtcNm" class="form-control" style="width:200px; margin-left:15px;">
						    <option selected>지역(시/구)</option>
						</select>
					</div>
	            </div>
			</div>
			<div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab" style="margin-left:20px;">
				<div style="display: flex; flex-wrap: wrap;">
					<div class="form-group">
						<h3>요청서 양식</h3>
						<br>
					    <textarea wrap="hard" id="proProflReqForm" name="proProflReqForm" class="form-control" style="width:500px; height:350px; overflow: auto;"></textarea>
					</div>
					<div class="form-group">
						<img src="../resources/images/요청서 양식.png" style="width:110px; height:110px; margin: 100px 0 0 130px;" />
						<h6 style="color:#b1b1ae; text-align:center; margin: 30px 0 0 85px; line-height:1.5;">고객이 요청을 보낼때<br> 받고싶은 정보를 입력해주세요!<br> 요청을 받을때 편하게~<br> 내가 받고 싶은 정보만 쏙쏙! </h6>
					</div>
				</div>
			</div>
			<div class="tab-pane fade" id="contact2" role="tabpanel" aria-labelledby="contact2-tab" style="margin-left:20px;">
				<div style="display: flex; flex-wrap: wrap;">
					<div class="form-group">
					 	<h3>이력 작성</h3>
					 	<br>
					    <textarea wrap="hard" id="proProflHist" name="proProflHist" class="form-control" style="width:500px; height:350px; overflow: auto;"></textarea>
					</div> 
					<div class="form-group">
						<img src="../resources/images/이력서.png" style="width:110px; height:110px; margin: 100px 0 0 150px;" />
						<h6 style="color:#b1b1ae; text-align:center; margin: 30px 0 0 100px; line-height:1.5;">고객에게 어필할수있는~<br>프로페셔널한 당신의 이력을<br>자유롭게 입력해주세요 ! </h6>
					</div>
				</div>
			</div>
		</div>
		<div class="row" style="margin:20px 5px 0 0;">
		    <button class="btn btnPrev btn-primary mr-1 ml-auto">이전</button>
		    <button class="btn btnNext btn-primary ">다음</button>
		</div>
	</div>
  </div>
</form>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="/resources/js/jquery-bootstrap-tab-wizard.min.js"></script>
<script>
$('#myWizard').TabWizard({
    nextButtonClass: '.btnNext',
    previousButtonClass: '.btnPrev',
    onFinish: function () {
        // 폼 제출
        $('#frm').submit();
    }
});
</script>
  <script>
try {
  fetch(new Request("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js", { method: 'HEAD', mode: 'no-cors' })).then(function(response) {
    return true;
  }).catch(function(e) {
    var carbonScript = document.createElement("script");
    carbonScript.src = "//cdn.carbonads.com/carbon.js?serve=CK7DKKQU&placement=wwwjqueryscriptnet";
    carbonScript.id = "_carbonads_js";
    document.getElementById("carbon-block").appendChild(carbonScript);
  });
} catch (error) {
  console.log(error);
}
</script>
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36251023-1']);
  _gaq.push(['_setDomainName', 'jqueryscript.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


